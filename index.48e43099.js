const t=new class{constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){this.size=4,this.defaultBoard=t.map(t=>[...t]),this.board=t.map(t=>[...t]),this.status="idle",this.score=0}moveLeft(){this.move("left")}moveRight(){this.move("right")}moveDown(){this.move("down")}moveUp(){this.move("up")}move(t){if("playing"!==this.status)return;let e=this.board.map(t=>[...t]);for(let e=0;e<this.size;e++){let s=[];for(let i=0;i<this.size;i++){let r=e,a=i;"right"===t&&(a=this.size-1-i),"down"===t&&(r=this.size-1-i,a=e),"up"===t&&(r=i,a=e),"left"===t&&(r=e,a=i);let o=this.board[r][a];0!==o&&s.push(o)}s=this.combineValues(s);for(let i=0;i<this.size;i++){let r=e,a=i;"right"===t&&(a=this.size-1-i),"down"===t&&(r=this.size-1-i,a=e),"up"===t&&(r=i,a=e),"left"===t&&(r=e,a=i),this.board[r][a]=s[i]||0}}this.isBoardEqual(e,this.board)||this.addRandomNumber(),this.getStatus()}combineValues(t){for(let e=0;e<t.length-1;e++)t[e]===t[e+1]&&(t[e]*=2,this.score+=t[e],t.splice(e+1,1));for(;t.length<this.size;)t.push(0);return t}isBoardEqual(t,e){for(let s=0;s<this.size;s++)for(let i=0;i<this.size;i++)if(t[s][i]!==e[s][i])return!1;return!0}getScore(){return this.score}getState(){return this.board}getStatus(){return"playing"===this.status&&this.canMove(),this.status}canMove(){for(let t=0;t<this.size;t++)for(let e=0;e<this.size;e++)if(2048===this.board[t][e]){this.status="win";return}for(let t=0;t<this.size;t++)for(let e=0;e<this.size;e++)if(0===this.board[t][e]){this.status="playing";return}for(let t=0;t<this.size;t++)for(let e=0;e<this.size-1;e++)if(this.board[t][e]===this.board[t][e+1]){this.status="playing";return}for(let t=0;t<this.size-1;t++)for(let e=0;e<this.size;e++)if(this.board[t][e]===this.board[t+1][e]){this.status="playing";return}this.status="lose"}start(){this.status="playing",this.addRandomNumber(),this.addRandomNumber()}restart(){this.status="idle",this.board=this.defaultBoard.map(t=>[...t]),this.score=0}addRandomNumber(){let t=[];for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++)0===this.board[e][s]&&t.push([e,s]);if(t.length>0){let e=Math.floor(Math.random()*t.length),[s,i]=t[e];this.board[s][i]=this.generateRandomNumber()}}generateRandomNumber(){return .1>Math.random()?4:2}},e=Array.from(document.querySelectorAll(".field-cell")),s=document.querySelector(".start"),i=document.querySelector(".message-start"),r=document.querySelector(".message-lose"),a=document.querySelector(".message-win"),o=document.querySelector(".game-score");function h(t){t.forEach((t,s)=>{t.forEach((t,i)=>{let r=e[4*s+i];0!==t?(r.className=`field-cell field-cell--${t}`,r.textContent=`${t}`):(r.className="field-cell",r.textContent="")})})}function l(){"win"===t.status&&a.classList.remove("hidden"),"lose"===t.status&&r.classList.remove("hidden"),o.innerHTML=`${t.getScore()}`}s.addEventListener("click",()=>{t.restart(),t.start(),a.classList.add("hidden"),r.classList.add("hidden"),"Start"===s.textContent&&(i.style.display="none",s.innerHTML="Restart",s.className="button restart"),l(),h(t.getState())}),document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":t.moveUp(),h(t.getState()),l();break;case"ArrowDown":t.moveDown(),h(t.getState()),l();break;case"ArrowLeft":t.moveLeft(),h(t.getState()),l();break;case"ArrowRight":t.moveRight(),h(t.getState()),l()}});
//# sourceMappingURL=index.48e43099.js.map
